#!/usr/bin/env bash

# NOTE that this is MacOS only.

# Display desktop notification.
# Usage: notif sleep 3
# https://apple.stackexchange.com/questions/57412/how-can-i-trigger-a-notification-center-notification-from-an-applescript-or-shel

source "$DOTPATH/lib/vitalize.sh"

shopt -s expand_aliases
source "$DOTPATH/dotfiles/zsh/aliases"
test -f "$HOME/aliases.local" && source "$HOME/aliases.local"

case $(ostype) in
    macos )
        eval "$@"
        cmds=($@)
        osascript -e "display notification \"$@\" with title \"${cmds[0]} finished\""
        ;;

    arch )
        cmds=($@)
        eval "$@" && notify-send "[ok] ${cmds[*]}" || notify-send "[ERROR] ${cmds[*]}"
        ;;

    * )
        echo "OS not supported" && exit 1
        ;;
esac

